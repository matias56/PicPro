<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Contraseña - PictureaPRO</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <main>
        <div class="left-panel">
            <h1 class="logo-title"><strong>Picturea</strong>PRO</h1>
        </div>
        <div class="right-panel">
            <form id="reset-password-form" class="login-container">

                <div id="step1-verify-email">
                    <h2>RECUPERAR CONTRASEÑA</h2>
                    <p style="text-align: left; color: #555; margin-bottom: 20px;">
                        Ingresa tu correo electrónico para verificar tu cuenta.
                    </p>
                    <div class="input-group">
                        <svg class="input-icon" ...></svg> <input type="email" id="reset-email"
                            placeholder="Correo electrónico" required>
                    </div>
                    <p id="error-message" class="error-message"></p>
                    <div class="button-group">
                        <a href="index.html" class="button-link create-account">CANCELAR</a>
                        <button type="submit" class="login-button">VERIFICAR</button>
                    </div>
                </div>

                <div id="step2-reset-password" style="display: none;">
                    <h2>INGRESAR NUEVA CONTRASEÑA</h2>
                    <p style="text-align: left; color: #555; margin-bottom: 20px;">
                        Tu email ha sido verificado. Ahora, ingresa tu nueva contraseña.
                    </p>
                    <div class="input-group">
                        <svg class="input-icon" ...></svg> <input type="password" id="new-password"
                            placeholder="Nueva contraseña" required>
                    </div>
                    <div class="button-group">
                        <button type="submit" class="login-button">GUARDAR</button>
                    </div>
                </div>

                <div id="step3-success" style="display: none;">
                    <h2>¡ÉXITO!</h2>
                    <p style="text-align: left; color: #555; margin-bottom: 20px;">
                        Tu contraseña ha sido actualizada correctamente.
                    </p>
                    <div class="button-group">
                        <a href="index.html" class="button-link login-button">VOLVER AL INICIO</a>
                    </div>
                </div>

            </form>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const resetForm = document.getElementById('reset-password-form');
            const step1 = document.getElementById('step1-verify-email');
            const step2 = document.getElementById('step2-reset-password');
            const step3 = document.getElementById('step3-success');
            const errorMessage = document.getElementById('error-message');

            let currentStep = 1; // Keep track of the current step

            resetForm.addEventListener('submit', function (e) {
                e.preventDefault();

                if (currentStep === 1) {
                    // --- Handle Email Verification ---
                    const emailAttempt = document.getElementById('reset-email').value;
                    const storedEmail = localStorage.getItem('userEmail');

                    if (emailAttempt && emailAttempt === storedEmail) {
                        // Email exists, proceed to step 2
                        step1.style.display = 'none';
                        step2.style.display = 'block';
                        errorMessage.textContent = '';
                        currentStep = 2;
                    } else {
                        // Email does not exist
                        errorMessage.textContent = 'No hay ninguna cuenta registrada con esa dirección.';
                    }
                } else if (currentStep === 2) {
                    // --- Handle Saving New Password ---
                    const newPassword = document.getElementById('new-password').value;

                    if (newPassword) {
                        // Update the password in localStorage
                        localStorage.setItem('userPassword', newPassword);

                        // Proceed to success message
                        step2.style.display = 'none';
                        step3.style.display = 'block';
                    }
                }
            });
        });
    </script>
</body>

</html>